-- Create the database and use it (uncomment these lines if you need to create the database)
-- CREATE DATABASE IF NOT EXISTS TimeManagementApp;
-- USE TimeManagementApp;

-- Create Users Table
CREATE TABLE IF NOT EXISTS Users (
    UserID INT AUTO_INCREMENT PRIMARY KEY,
    FirstName VARCHAR(255) NOT NULL,
    LastName VARCHAR(255) NOT NULL,
    Email VARCHAR(255) UNIQUE NOT NULL,
    PasswordHash CHAR(64) NOT NULL  -- Assuming SHA-256 hashing for passwords
);

-- Create Tasks Table
CREATE TABLE IF NOT EXISTS Tasks (
    TaskID INT AUTO_INCREMENT PRIMARY KEY,
    UserID INT NOT NULL,
    Title VARCHAR(255) NOT NULL,
    Description TEXT,
    DueDate DATETIME,
    Status ENUM('PENDING', 'IN_PROGRESS', 'COMPLETED') DEFAULT 'PENDING',
    FOREIGN KEY (UserID) REFERENCES Users(UserID)
);

CREATE TABLE IF NOT EXISTS Subtasks (
    SubtaskID INT AUTO_INCREMENT PRIMARY KEY,
    TaskID INT NOT NULL,
    Title VARCHAR(255) NOT NULL,
    Description TEXT,
    DueDate DATETIME,
    Status ENUM('PENDING', 'IN_PROGRESS', 'COMPLETED') DEFAULT 'PENDING',
    FOREIGN KEY (TaskID) REFERENCES Tasks(TaskID)
);

